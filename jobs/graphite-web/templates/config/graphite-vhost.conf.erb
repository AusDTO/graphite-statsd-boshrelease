<IfModule !wsgi_module.c>
    LoadModule wsgi_module modules/mod_wsgi.so
</IfModule>

WSGIPythonHome /var/vcap/packages/python
WSGISocketPrefix run/wsgi

<VirtualHost *:80>
        ServerName graphite
        DocumentRoot "/var/vcap/packages/graphite-web/lib"
        ErrorLog /var/vcap/sys/log/graphite-web/httpd_error.log
        CustomLog /var/vcap/sys/log/graphite-web/httpd_access.log common

        # I've found that an equal number of processes & threads tends
        # to show the best performance for Graphite (ymmv).
        WSGIDaemonProcess graphite processes=5 threads=5 display-name='%{GROUP}' inactivity-timeout=120 python-path=/var/vcap/packages/zope.interface/lib/python2.7/site-packages:/var/vcap/packages/whisper/lib/python2.7/site-packages:/var/vcap/packages/twisted/lib/python2.7/site-packages:/var/vcap/packages/pytz/lib/python2.7/site-packages:/var/vcap/packages/python/lib/python2.7/site-packages:/var/vcap/packages/pysqlite/lib/python2.7/site-packages:/var/vcap/packages/py2cairo/lib/python2.7/site-packages:/var/vcap/packages/mocker/lib/python2.7/site-packages:/var/vcap/packages/django-tagging/lib/python2.7/site-packages:/var/vcap/packages/django/lib/python2.7/site-packages
        WSGIProcessGroup graphite
        WSGIApplicationGroup %{GLOBAL}
        WSGIImportScript /var/vcap/packages/graphite-web/conf/graphite.wsgi process-group=graphite application-group=%{GLOBAL}

        WSGIScriptAlias / /var/vcap/packages/graphite-web/conf/graphite.wsgi

        Alias /content/ /var/vcap/packages/graphite-web/webapp/content/
        <Location "/content/">
                SetHandler None
        </Location>

        Alias /media/ "/var/vcap/packages/django/lib/python2.7/site-packages/django/contrib/admin/media/"
        <Location "/media/">
                SetHandler None
        </Location>

        <Directory /var/vcap/packages/graphite-web/conf/>
                Order deny,allow
                Allow from all
        </Directory>

</VirtualHost>
